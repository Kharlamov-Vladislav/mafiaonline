## Pet-Project анализ чатовой игры [мафия](mafiaonline.ru).

----------------------------------------------
### Описание репозитория
Данный репозиторий является частью моего pet'а в котором по данным ходов игроков и чата во время партии, более подробнее написано в описании проекта.

### Описание структуры репозитория
- `datasets` -  CSV таблицы разбитые по годам содеражащие основную информацию по партии без самого чата.
- `scripts` -  Рабочие Python'вские скрипты для обработки и анализа данных партий.


### Описание проекта
1. В чем заключается суть проекта?
- С помощью методом машинного обучения, мы хотим предсказать роль игрока по некоторым данным, которые доступны игроку в какой-то промежуток  времени.
2. Какие данные имеются?
- Собран dataset из миллиона партий по годам с 2012 по 2019 (без 2017 года) в виде:

![example dataset](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/8a9b3a1b-3a9c-473c-8837-b1d64b1c9904/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAT73L2G45O3KS52Y5%2F20200618%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20200618T110850Z&X-Amz-Expires=86400&X-Amz-Signature=0f3ecea529328455187163098d6dba88aae312692235f42d2946957feda728e2&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22)

3. Расшифровка колонок

|Features           |Describe                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|id                 |Внутриигровой уникальный индификатор партии.  <br> Пример: [игра][https://www.mafiaonline.ru/log/4181907]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|location           |Игра разделена на улицы. В каждой улице есть свои уникальные роли, классическая мафия с комиссаром, мафией, честными жителями идет на улице 'ul1', про остальные улицы можно прочитать в конце здесь: [roles](https://www.mafiaonline.ru/pages/roles). В приоритете будет изучаться локация 'ul1' (в игре именуемая как Улица Крещения) как наиболее приближенная к настоящей мафии.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|players            |В данной колонке содержится информация о партии: в JSON формате: <br> id - уникальный индификатор партии (ex. 4226783)  <br>  end - timestamp конца партии (ex. 1585570532) <br>  ul - улица на которой проходит партия (ex 'ul1') <br>   vip - предикат, означающий игралась ли данная партия на вип улице (ex. False/True)  <br> result - исход партии в закодированном виде. (ex 1, 2 ... ) <br>  constructor - предикат, означающий создана ли была партия по специальным правилам. (ex. True/False) <br>  players - словарь с данными об игроках: - ex. {'state': 2, 'role': 1, 'nick': 'cangrejo', 'id': 639365, 'sex': 'm'} <br> state: исход игрока по окончанию партии (умер, посажен, жив) <br> role: роль игрока (комиссар, мафия, ...) <br> nick: внутриигровой ник игрока <br> id: уникальный индификатор игрока (некоторые игроки удаляются из базы и их ник становится свободным, тогда под одним ником могут быть два разных игрока, но id будет разным) <br> sex: Пол указанный игроком (может не совпадать с реальным, но как правило совпадает. <br> Чего нет в dataset'е, но есть в запросе по API: chat - Чат партии с служебными сообщениями в виде html тегов и их содержимым. summary - Ходы игроков в виде html тегов и их содержимым.  Расшифровка констант - https://blog.mafiaonline.ru/api/const/ Пример запроса в API: https://www.mafiaonline.ru/api/api.php?action=log&param=log&id=4226799|
|start_time/end_time|Начало и конец партии в timestamp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|duration           |start_time - end_time                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|weekday            |День недели в который началась партия                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|result game        |Результат партии в закодированном виде.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |

### FAQ

- Чего в датасете еще нет?

Преимущественно чата и ходов игроков, но это было сделано осознанно, иначе бы датасет занимал порядка 16 GB памяти.

- А что еще можно достать?

Все, что можно достать из данной ссылки: [https://www.mafiaonline.ru/log/4181907](https://www.mafiaonline.ru/log/4181907)

- А как будем предсказывать?

Четкого плана еще нет, мы вместе делаем какие-то гипотезы, формируем команды 1-3 человека и пытаемся их протестировать.

- Что происходит на данный момент?

В данный момент проект заморожен до ближайших времен.
